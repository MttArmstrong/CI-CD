<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>CI/CD: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/intersect/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/intersect/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/intersect/favicon-16x16.png">
<link rel="manifest" href="favicons/intersect/site.webmanifest">
<link rel="mask-icon" href="favicons/intersect/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav intersect"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="intersect-logo" alt="CI/CD" src="assets/images/intersect-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav intersect" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="CI/CD" src="assets/images/intersect-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      CI/CD
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            CI/CD
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  CI/CD
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress intersect">
    <div class="progress-bar intersect" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="exit-codes.html">2. Exit Codes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="understanding-yaml.html">3. Understanding Yet Another Markup Language</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="yaml-and-github-actions.html">4. YAML and GitHub Actions</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="hello-ci-world.html">5. Hello CI World</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="ci-for-python-package-unit-test.html">6. CI for Python Package</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="ci-for-python-package-matrix.html">7. Matrix</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="cd-for-python-package.html">8. CD for Python Package</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="add-badges.html">9. Badge for CI/CD</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="discuss-documentation-ci-cd.html">10. (Bonus) Discuss CI/CD for Documentation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="quick-primer-on-containers.html">11. (Bonus) Quick primer on Containers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="ci-cd-for-documentation-using-containers.html">12. (Bonus) Implementing CI/CD for documentation using containers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is continuous integration / continuous deployment?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand why CI/CD is important</li>
<li>Learn what can be possible with CI/CD</li>
<li>Find resources to explore in more depth</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="what-is-cicd">What is CI/CD?<a class="anchor" aria-label="anchor" href="#what-is-cicd"></a>
</h1>
<p>Continuous Integration (CI) is the concept of continuously
integrating all code changes. So every time a contributor (student,
colleague, random bystander) provides new changes to your codebase,
those changes can trigger builds, tests, or other code checks to make
sure the changes don’t “break” anything. As your team of developers grow
and your community of contributors grow, CI becomes your best friend to
ensure quality of code!</p>
<p>CD can actually mean two different terms. First there is Continuous
Deployment (CD) and then their is Continuous Delivery (also CD). Most
people use these interchangably but there is a subtle difference.</p>
<p>Both CD methods are similar in that they are the literal continuous
deployment of code changes. If CI is the automation of verifying code
changes via testing, formatting, etc., then CD is automation of
deploying / delivering those changes to your community.</p>
<p>The differences are that after CI passes, Continous Delivery will
stage a deployment but wait for a manual action to perform the actual
deployment. Continous Deployment is if CI passes, there is no manual
intervention. The deployment will automatically continue.</p>
<p><img src="%7B%7B%20page.root%20%7D%7D/fig/atlassian_continous_delivery_vs_continuous_deployment.png" alt="Atlassian image for CD" class="figure"><em>Figure 1. Differences between
continous delivery vs. continous deployment and their relationship to
continous integration. Image retrieved from: <a href="https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment" class="external-link">https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment</a></em></p>
</div>
<div class="section level1">
<h1 id="breaking-changes">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes"></a>
</h1>
<p>What does it even mean to “break” something? The idea of “breaking”
something is pretty contextual. If you’re working on C++ code, then you
probably want to make sure things compile and run without segfaulting at
the bare minimum. If it’s python code, maybe you have some tests with
pytest that you want to make sure pass (“exit successfully”). Or if
you’re working on a paper draft, you might check for grammar,
misspellings, and that the document compiles from LaTeX. Whatever the
use-case is, integration is about catching breaking changes.</p>
<div class="section level2">
<h2 id="deployment">Deployment<a class="anchor" aria-label="anchor" href="#deployment"></a>
</h2>
<p>Similarly, “deployment” can mean a lot of things. Perhaps you have a
Curriculum Vitae (CV) that is automatically built from LaTeX and
uploaded to your website. Another case is to release docker images of
your framework that others depend on. Maybe it’s just uploading
documentation. Or to even upload a new tag of your python package on
<code>pypi</code>. Whatever the use-case is, deployment is about
<strong>releasing</strong> changes.</p>
</div>
<div class="section level2">
<h2 id="workflow-automation">Workflow Automation<a class="anchor" aria-label="anchor" href="#workflow-automation"></a>
</h2>
<p>CI/CD is the first step to automating your entire workflow. Imagine
everything you do in order to run an analysis, or make some changes. Can
you make a computer do it automatically? If so, do it! The less human
work you do, the less risk of making human mistakes.</p>
<div id="anything-you-can-do-a-computer-can-do-better" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="anything-you-can-do-a-computer-can-do-better" class="callout-inner">
<h3 class="callout-title">Anything you can do, a computer can do better</h3>
<div class="callout-content">
<p>Any command you run on your computer can be equivalently run in a CI
job.</p>
</div>
</div>
</div>
<p>Don’t just limit yourself to thinking of CI/CD as primarily for
testing changes, but as one part of automating an entire development
cycle. You can trigger notifications to your cellphone, fetch/download
new data, execute cron jobs, and so much more. However, for this lesson,
you’ll be going through what you have recently learned about for python
testing with <code>pytest</code> in the <a href="https://intersect-training.org/testing-lesson/" class="external-link">INTERSECT testing
lesson</a> and python packaging in the <a href="https://intersect-training.org/packaging" class="external-link">INTERSECT packaging
lesson</a>.</p>
</div>
</div>
<div class="section level1">
<h1 id="cicd-tools-and-solutions">CI/CD Tools and Solutions<a class="anchor" aria-label="anchor" href="#cicd-tools-and-solutions"></a>
</h1>
<p>When it comes to picking a CI/CD solution, there are plenty to pick
from. Below is a list of a few of these options:</p>
<ul>
<li><a href="https://github.com/features/actions" class="external-link">Native GitHub
Actions</a></li>
<li><a href="https://docs.gitlab.com/ee/ci/" class="external-link">Native GitLab
CI/CD</a></li>
<li><a href="https://circleci.com/" class="external-link">Circle CI</a></li>
<li><a href="https://jenkins.io/" class="external-link">Jenkins</a></li>
<li><a href="https://www.jetbrains.com/teamcity/" class="external-link">TeamCity</a></li>
<li><a href="https://www.atlassian.com/software/bamboo" class="external-link">Bamboo</a></li>
<li><a href="https://travis-ci.org/" class="external-link">Travis CI</a></li>
<li><a href="https://buddy.works/" class="external-link">Buddy</a></li>
<li><a href="https://codeship.com/" class="external-link">CodeShip</a></li>
<li><a href="https://g.codefresh.io/" class="external-link">CodeFresh</a></li>
</ul>
<p>For an even more comprehensive list, the GitHub repository <a href="https://github.com/ligurio/awesome-ci" class="external-link">ligurio/awesome-ci</a> is a
great reference!</p>
<p>For today’s lesson, we’ll only focus on GitHub’s solution (GitHub
Actions). However, be aware that all the concepts you’ll be taught
today: including pipelines, jobs, artifacts; all exist in other
solutions by similar/different names. For example, GitLab supports two
features known as caching and artifacts; but Travis doesn’t quite
implement the same thing for caching and has no native support for
artifacts. Therefore, while we don’t discourage you from trying out
other solutions, there’s no “one size fits all” when designing your own
CI/CD workflow.</p>
<p><em>Why are we picking GitHub Actions?!?</em></p>
<p>A few quick reasons that this was select is: * If you already use
GitHub for version control, you do not have to have a 3rd party
integration for your CI/CD solution; this usually requires storing
secrets between GitHub and CI/CD solution, which can be problematic if
security breaches happen (example of such an event <a href="https://github.blog/2022-04-15-security-alert-stolen-oauth-user-tokens/" class="external-link">here</a>)
* GitHub Actions is completely free for open source and free with limits
for private repos! * Servers / runners are provided for multiple
operating systems. * US-RSE uses GitHub Actions on projects like the <a href="https://github.com/USRSE/usrse.github.io" class="external-link">website</a>! So you will
learn about one of the CI solutions used by the association!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>CI/CD is crucial for any reproducibility and testing</li>
<li>Take advantage of automation to reduce your workload</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-exit-codes"><p>Content from <a href="exit-codes.html">Exit Codes</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/exit-codes.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is an exit code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand exit codes</li>
<li>How to print exit codes</li>
<li>How to set exit codes in a script</li>
<li>How to ignore exit codes</li>
<li>Create a script that terminates in success/error</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One very important, foundational concept of Continuous Integration /
Continuous Deployment (CI/CD) tooling is exit codes. These signal to the
many CI/CD tools if a job is successful or failing. The connection
between exit codes and CI/CD pipelines is programming language agnostic
and useful for any project understanding and debugging CI/CD issues.</p>
<div class="section level1">
<h1 id="start-by-exiting">Start by Exiting<a class="anchor" aria-label="anchor" href="#start-by-exiting"></a>
</h1>
<p>How does a general task know whether or not a script finished
correctly or not? You could parse (<code>grep</code>) the output:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">ls</span> nonexistent-file</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ls: cannot access 'nonexistent-file': No such file or directory</code></pre>
</div>
<p>But every command outputs something differently. Instead, scripts
also have an (invisible) exit code:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">ls</span> nonexistent-file</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$?</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">ls:</span> cannot access <span class="st">'nonexistent-file'</span>: No such file or directory</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">2</span></span></code></pre>
</div>
<p>The exit code is <code>2</code> indicating failure. What about on
success? The exit code is <code>0</code> like so:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">echo</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$?</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span></code></pre>
</div>
<p>But this works for any command you run on the command line! For
example, if I mistyped <code>git status</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">git</span> stauts</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$?</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>git: 'stauts' is not a git command. See 'git --help'.

The most similar command is
  status
1</code></pre>
</div>
<p>and there, the exit code is non-zero – a failure.</p>
</div>
<div class="section level1">
<h1 id="printing-exit-codes">Printing Exit Codes<a class="anchor" aria-label="anchor" href="#printing-exit-codes"></a>
</h1>
<p>As you’ve seen above, the exit code from the last executed command is
stored in the <code>$?</code> environment variable. Accessing from a
shell is easy <code>echo $?</code>. What about from python? There are
many different ways depending on which library you use. Using similar
examples above, we can use the <code>getstatusoutput()</code> call:</p>
<div id="printing-exit-codes-via-python" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="printing-exit-codes-via-python" class="callout-inner">
<h3 class="callout-title">Printing Exit Codes via Python</h3>
<div class="callout-content">
<p>To enter the Python interpreter, simply type <code>python</code> in
your command line.</p>
<p>Once inside the Python interpreter, simply type <code>exit()</code>
then press enter, to exit.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> subprocess <span class="im">import</span> getstatusoutput</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> status,output<span class="op">=</span>getstatusoutput(<span class="st">'ls'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> status</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> status,output<span class="op">=</span>getstatusoutput(<span class="st">'ls nonexistent-file'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> status</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="dv">2</span></span></code></pre>
</div>
<p>It may happen that this returns a different exit code than from the
command line (indicating there’s some internal implementation in
Python). All you need to be concerned with is that the exit code was
non-zero (there was an error).</p>
</div>
<div class="section level1">
<h1 id="setting-exit-codes">Setting Exit Codes<a class="anchor" aria-label="anchor" href="#setting-exit-codes"></a>
</h1>
<p>So now that we can get those exit codes, how can we set them? Let’s
explore this in <code>shell</code> and in <code>python</code>.</p>
<div class="section level2">
<h2 id="shell">Shell<a class="anchor" aria-label="anchor" href="#shell"></a>
</h2>
<p>Create a file called <code>bash_exit.sh</code> with the following
content:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$1</span> <span class="ot">==</span> <span class="st">"hello"</span> <span class="bu">]</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="cf">then</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="bu">exit</span> 0</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="bu">exit</span> 59</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="cf">fi</span></span></code></pre>
</div>
<p>and then make it executable <code>chmod +x bash_exit.sh</code>. Now,
try running it with <code>./bash_exit.sh hello</code> and
<code>./bash_exit.sh goodbye</code> and see what those exit codes
are.</p>
</div>
<div class="section level2">
<h2 id="python">Python<a class="anchor" aria-label="anchor" href="#python"></a>
</h2>
<p>Create a file called <code>python_exit.py</code> with the following
content:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co">#!/usr/bin/env python</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="cf">if</span> sys.argv[<span class="dv">1</span>] <span class="op">==</span> <span class="st">"hello"</span>:</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  sys.exit(<span class="dv">0</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  sys.exit(<span class="dv">59</span>)</span></code></pre>
</div>
<p>and then make it executable <code>chmod +x python_exit.py</code>.
Now, try running it with <code>./python_exit.py hello</code> and
<code>./python_exit.py goodbye</code> and see what those exit codes are.
Déjà vu?</p>
</div>
</div>
<div class="section level1">
<h1 id="ignoring-exit-codes">Ignoring Exit Codes<a class="anchor" aria-label="anchor" href="#ignoring-exit-codes"></a>
</h1>
<p>To finish up this section, you will sometimes encounter a code that
does not respect exit codes. This can be very annoying when you start
development with the assumption that exit status codes are meaningful
(such as with CI). In these cases, you’ll need to ignore the exit code.
An easy way to do this is to execute a second command that always gives
<code>exit 0</code> if the first command doesn’t, like so:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;</span> ls <span class="ex">nonexistent-file</span> <span class="kw">||</span> <span class="bu">echo</span> ignore failure</span></code></pre>
</div>
<p>The <code>command_1 || command_2</code> operator means to execute
<code>command_2</code> only if <code>command_1</code> has failed
(non-zero exit code). Similarly, the
<code>command_1 &amp;&amp; command_2</code> operator means to execute
<code>command_2</code> only if <code>command_1</code> has succeeded. Try
this out using one of scripts you made in the previous session:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;</span> ./python_exit.py <span class="ex">goodbye</span> <span class="kw">||</span> <span class="bu">echo</span> ignore</span></code></pre>
</div>
<p>What does that give you?</p>
<div id="overriding-exit-codes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="overriding-exit-codes" class="callout-inner">
<h3 class="callout-title">Overriding Exit Codes</h3>
<div class="callout-content">
<p>It’s not really recommended to ‘hack’ the exit codes like this, but
this example is provided so that you are aware of how to do it, if you
ever run into this situation. Assume that scripts respect exit codes,
until you run into one that does not.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Exit codes are used to identify if a command or script executed with
errors or not</li>
<li>Not everyone respects exit codes</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-understanding-yaml"><p>Content from <a href="understanding-yaml.html">Understanding Yet Another Markup Language</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/understanding-yaml.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is YAML?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about YAML</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="yaml">YAML<a class="anchor" aria-label="anchor" href="#yaml"></a>
</h1>
<p>YAML (Yet Another Markup Language or sometimes popularly referred to
as YAML Ain’t Markup Language (a recursive acronym)) is a human-readable
data-serialization language. It is commonly used for configuration files
and in applications where data is being stored or transmitted. CI
systems’ heavily rely on YAML for configuration. We’ll cover, briefly,
some of the native types involved and what the structure looks like.</p>
<div id="tabs-or-spaces" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tabs-or-spaces" class="callout-inner">
<h3 class="callout-title">Tabs or Spaces?</h3>
<div class="callout-content">
<p>We strongly suggest you use spaces for a YAML document. Indentation
is done with one or more spaces, however <strong>two spaces</strong> is
the unofficial standard commonly used.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="scalars">Scalars<a class="anchor" aria-label="anchor" href="#scalars"></a>
</h2>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">number-value</span><span class="kw">:</span><span class="at"> </span><span class="dv">42</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">floating-point-value</span><span class="kw">:</span><span class="at"> </span><span class="fl">3.141592</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">boolean-value</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # on, yes -- also work</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># strings can be both 'single-quoted` and "double-quoted"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">string-value</span><span class="kw">:</span><span class="at"> </span><span class="st">'Bonjour'</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">unquoted-string</span><span class="kw">:</span><span class="at"> Hello World</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">hexadecimal</span><span class="kw">:</span><span class="at"> </span><span class="dv">0x12d4</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">scientific</span><span class="kw">:</span><span class="at"> </span><span class="fl">12.3015e+05</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">infinity</span><span class="kw">:</span><span class="at"> </span><span class="fl">.inf</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">not-a-number</span><span class="kw">:</span><span class="at"> </span><span class="fl">.NAN</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="fu">null</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">another-null</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">key with spaces</span><span class="kw">:</span><span class="at"> value</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="fu">datetime</span><span class="kw">:</span><span class="at"> 2001-12-15T02:59:43.1Z</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="fu">datetime_with_spaces</span><span class="kw">:</span><span class="at"> 2001-12-14 21:59:43.10 -5</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> 2023-07-14</span></span></code></pre>
</div>
<div id="give-your-colons-some-breathing-room" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="give-your-colons-some-breathing-room" class="callout-inner">
<h3 class="callout-title">Give your colons some breathing room</h3>
<div class="callout-content">
<p>Notice that in the above list, all colons have a space afterwards,
<code>:</code>. This is important for YAML parsing and is a common
mistake.</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="lists-and-dictionaries">Lists and Dictionaries<a class="anchor" aria-label="anchor" href="#lists-and-dictionaries"></a>
</h2>
<p>Elements of a list start with a “-” (a dash and a space) at the same
indentation level.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">breeds</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Beagle</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Corgi</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> German Shepherd</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Poodle</span></span></code></pre>
</div>
<p>Elements of a dictionary are in the form of “key: value” (the colon
must followed by a space).</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">madrigal</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Bruno Madrigal</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">  </span><span class="fu">voice-actor</span><span class="kw">:</span><span class="at"> John Leguizamo</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">  </span><span class="fu">gift</span><span class="kw">:</span><span class="at"> sees the future</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">  </span><span class="fu">allowed-to-talk-about-character</span><span class="kw">:</span><span class="at"> no no no</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="inline-syntax">Inline-Syntax<a class="anchor" aria-label="anchor" href="#inline-syntax"></a>
</h3>
<p>Since YAML is a superset of JSON, you can also write JSON-style maps
and sequences.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">sisters</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"Julieta"</span><span class="kw">,</span><span class="at"> </span><span class="st">"Pepa"</span><span class="kw">]</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">parents</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="fu">father</span><span class="kw">:</span><span class="at"> Pedro</span><span class="kw">,</span><span class="at"> </span><span class="fu">mother</span><span class="kw">:</span><span class="at"> Alma</span><span class="kw">}</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="multiline-strings">Multiline Strings<a class="anchor" aria-label="anchor" href="#multiline-strings"></a>
</h3>
<p>In YAML, there are two different ways to handle multiline strings.
This is useful, for example, when you have a long code block that you
want to format in a pretty way, but don’t want to impact the
functionality of the underlying CI script. In these cases, multiline
strings can help. For an interactive demonstration, you can visit <a href="https://yaml-multiline.info/" class="external-link">https://yaml-multiline.info/</a>.</p>
<p>Put simply, you have two operators you can use to determine whether
to keep newlines (<code>|</code>, exactly how you wrote it) or to remove
newlines (<code>&gt;</code>, fold them in). Similarly, you can also
choose whether you want a single newline at the end of the multiline
string, multiple newlines at the end (<code>+</code>), or no newlines at
the end (<code>-</code>). The below is a summary of some variations:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">folded_no_ending_newline</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">  </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="kw">    - </span><span class="ch">&gt;-</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>      echo "foo" &amp;&amp;</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>      echo "bar" &amp;&amp;</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>      echo "baz"</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> echo "do something else"</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="fu">unfolded_ending_single_newline</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">  </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="kw">    - </span><span class="ch">|</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>      echo "foo" &amp;&amp; \</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>      echo "bar" &amp;&amp; \</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>      echo "baz"</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> echo "do something else"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="nested">Nested<a class="anchor" aria-label="anchor" href="#nested"></a>
</h3>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">  # first item of `requests` list is just a string</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> http://example.com/</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">  # second item of `requests` list is a dictionary</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">url</span><span class="kw">:</span><span class="at"> http://example.com/</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="at">    </span><span class="fu">method</span><span class="kw">:</span><span class="at"> GET</span></span></code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="comments">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h2>
<p>Comments begin with a pound sign (<code>#</code>) and continue for
the rest of the line:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># This is a full line comment</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">foo</span><span class="kw">:</span><span class="at"> bar</span><span class="co"> # this is a comment, too</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="anchors">Anchors<a class="anchor" aria-label="anchor" href="#anchors"></a>
</h2>
<p>YAML also has a handy feature called ‘anchors’, which let you easily
duplicate content across your document. Anchors look like references
<code>&amp;</code> in C/C++ and named anchors can be dereferenced using
<code>*</code>.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">anchored_content</span><span class="kw">:</span><span class="at"> </span><span class="ot">&amp;anchor_name</span><span class="at"> This string will appear as the value of two keys.</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">other_anchor</span><span class="kw">:</span><span class="at"> </span><span class="ot">*anchor_name</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">base</span><span class="kw">:</span><span class="at"> </span><span class="ot">&amp;base</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Everyone has same name</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">foo</span><span class="kw">:</span><span class="at"> </span><span class="ot">&amp;foo</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="at">  </span><span class="fu">&lt;&lt;</span><span class="kw">:</span><span class="at"> </span><span class="ot">*base</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="at">  </span><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="fu">bar</span><span class="kw">:</span><span class="at"> </span><span class="ot">&amp;bar</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">  </span><span class="fu">&lt;&lt;</span><span class="kw">:</span><span class="at"> </span><span class="ot">*base</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="at">  </span><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">20</span></span></code></pre>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>The <code>&lt;&lt;</code> allows you to merge the items in a
dereferenced anchor. Both <code>bar</code> and <code>foo</code> will
have a <code>name</code> key.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="what-cicd-tools-use-yaml">What CI/CD tools use YAML<a class="anchor" aria-label="anchor" href="#what-cicd-tools-use-yaml"></a>
</h1>
<p>The following are just some of the CI/CD tools that use YAML: - <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions" class="external-link">Native
GitHub Actions YAML Docs</a> - <a href="https://docs.gitlab.com/ee/ci/yaml/" class="external-link">Native GitLab CI/CD YAML
Docs</a> - <a href="https://circleci.com/docs/introduction-to-yaml-configurations/" class="external-link">Circle
CI YAML Docs</a> - <a href="https://confluence.atlassian.com/bamboo/bamboo-yaml-938844479.html" class="external-link">Bamboo
YAML Docs</a> - <a href="https://docs.travis-ci.com/user/customizing-the-build/" class="external-link">Travis CI
YAML Docs</a> - <a href="https://docs.cloudbees.com/docs/cloudbees-codeship/latest/pro-builds-and-configuration/services" class="external-link">CodeShip
YAML Docs</a> - <a href="https://codefresh.io/docs/docs/pipelines/what-is-the-codefresh-yaml/" class="external-link">CodeFresh
YAML Docs</a></p>
<p>Understanding YAML, like exit codes, is foundational and a general
skill for almost all CI/CD tools.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>YAML is a plain-text format, similar to JSON, useful for
configuration</li>
<li>YAML is used in many CI/CD tools and solutions</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-yaml-and-github-actions"><p>Content from <a href="yaml-and-github-actions.html">YAML and GitHub Actions</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/yaml-and-github-actions.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the GitHub Actions specification?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn where to find more details about everything for the GitHub
Actions.</li>
<li>Understand the components of GitHub Actions YAML file.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="github-actions-yaml">GitHub Actions YAML<a class="anchor" aria-label="anchor" href="#github-actions-yaml"></a>
</h1>
<p>The GitHub Actions configurations are specified using YAML files
stored in the<code>.github/workflows/</code> directory.</p>
<p>Let us look at a basic example:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">  </span><span class="fu">job_1</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> My first step</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo This is the first step of my first job.</span></span></code></pre>
</div>
<p><code>name</code>: GitHub displays the names of your workflows on
your repository’s actions page. If you omit name, GitHub sets it to the
YAML file name.</p>
<p><code>on</code>: <strong>Required</strong>. Specify the event that
automatically triggers a workflow run. This example uses the push event,
so that the jobs run every time someone pushes a change to the
repository.<br> For more details, check <a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on" class="external-link">this
link</a>.</p>
<div id="jobs" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="jobs" class="callout-inner">
<h3 class="callout-title"><code>jobs</code></h3>
<div class="callout-content">
<p>Specify the job(s) to be run on the CI/CD servers or job runners.
Jobs run in parallel by default. To run jobs sequentially, you have to
define dependencies on other jobs. This will be covered later.</p>
<p><code>&lt;job_id&gt;</code>: Each job must have an id to associate
with the job, job_1 in the above example. The key job_id is a string
that is unique to the jobs object. It must start with a letter or _ and
contain only alphanumeric characters, -, or _. Its value is a map of the
job’s configuration data.</p>
<ul>
<li><p><code>runs-on</code>: <strong>Required</strong>. Each job runs in
an virtual environment specified by the key runs-on. Available
environments can be found <a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on" class="external-link">here</a>.</p></li>
<li><p><code>steps</code>: Specify sequence of tasks. A step is an
individual task that can run commands (known as actions). Each step in a
job executes on the same runner, allowing the actions in that job to
share data with each other. If you do not provide a <code>name</code>,
the step name will default to the text specified in the <code>run</code>
command.</p></li>
</ul>
<p><a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobs" class="external-link">Further
reading on jobs</a>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="overall-structure">Overall Structure<a class="anchor" aria-label="anchor" href="#overall-structure"></a>
</h2>
<p>Every single parameter we consider for all configurations are keys
under jobs. The YAML is structured using job names. For example, we can
define two jobs that run in parallel with different sets of
parameters.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;name of your workflow&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> &lt;event or list of events&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">  </span><span class="fu">job_1</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;name of the first job&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> &lt;type of machine to run the job on&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;step 1&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>          &lt;commands&gt;</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;step 2&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>          &lt;commands&gt;</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">  </span><span class="fu">job_2</span><span class="kw">:</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;name of the second job&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> &lt;type of machine to run the job on&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;step 1&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>          &lt;commands&gt;</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;step 2&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>          &lt;commands&gt;</span></code></pre>
</div>
<div id="reference" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="reference" class="callout-inner">
<h3 class="callout-title">Reference</h3>
<div class="callout-content">
<p>The reference guide for all GitHub Actions pipeline configurations is
found at <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions" class="external-link">workflow-syntax-for-github-actions</a>.
This contains all the different parameters you can assign to a job.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>You should bookmark the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions" class="external-link">GitHub
Actions reference</a>. You’ll visit that page often.</li>
<li>Actions are standalone commands that are combined into steps to
create a job.</li>
<li>Workflows are made up of one or more jobs and can be scheduled or
triggered.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-hello-ci-world"><p>Content from <a href="hello-ci-world.html">Hello CI World</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/hello-ci-world.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I run a simple GitHub Actions job?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Add CI/CD to your project.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now, we will be adding a GitHub Actions YAML file to a repository.
This is all we will need to run CI using GitHub Actions.</p>
<p>If you haven’t already, use the <a href="/setup.html">Setup
instructions</a> to get the example <code>intersect-training-cicd</code>
repository setup locally and remotely in GitHub.</p>
<section><h2 class="section-heading" id="adding-cicd-to-a-project">Adding CI/CD to a project<a class="anchor" aria-label="anchor" href="#adding-cicd-to-a-project"></a>
</h2>
<hr class="half-width">
<p>The first thing we’ll do is create a
<code>.github/workflows/main.yml</code> file in the project.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="bu">cd</span> intersect-training-cicd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> .github/workflows</span></code></pre>
</div>
<p>Open <code>.github/workflows/main.yml</code> with your favorite
editor and add the following</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">greeting</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Greeting!</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo hello world</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="run-github-actions">Run GitHub Actions<a class="anchor" aria-label="anchor" href="#run-github-actions"></a>
</h2>
<hr class="half-width">
<p>We’ve created the <code>.github/workflows/main.yml</code> file but
it’s not yet on GitHub. Next step we’ll push these changes to GitHub so
that it can run our job. Since we’re adding a new feature (adding CI) to
our project, we’ll work in a feature branch.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> add-ci</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/main.yml</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds initial GitHub Actions for CI"</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin add-ci</span></code></pre>
</div>
<p>And that’s it! You’ve successfully run your CI job and you can view
the output. You just have to navigate to the GitHub webpage for the
<code>intersect-training-cicd</code> project and hit Actions button.
There, you will find details of your job (status, output,…).</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/hello-ci-actions-tab.png" alt="GitHub Actions page" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions page</div>
</figure><p>From this page, click through until you can find the output for the
successful job run which should look like the following</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/hello-ci-actions-tab-part2.png" alt="GitHub Actions page part 2" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions page part 2</div>
</figure></section><section><h2 class="section-heading" id="pull-request">Pull Request<a class="anchor" aria-label="anchor" href="#pull-request"></a>
</h2>
<hr class="half-width">
<p>Lastly, we’ll open up a pull request for this branch, since we plan
to merge this back into <code>main</code> when we’re happy with the
first iteration of the Actions.</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/hello-ci-pull-request-create.png" alt="Pull Request" class="figure mx-auto d-block"><div class="figcaption">Pull Request</div>
</figure><p>See the beauty of the passing CI checks for your pull request!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/hello-ci-pull-request-see-ci.png" alt="Pull Request" class="figure mx-auto d-block"><div class="figcaption">Pull Request</div>
</figure><div id="dont-merge-yet" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="dont-merge-yet" class="callout-inner">
<h3 class="callout-title">Don’t merge yet!</h3>
<div class="callout-content">
<p>We will just continue this Pull Request as we continue. Don’t merge
into <code>main</code> yet.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Creating <code>.github/workflows/main.yml</code> is the first step
to CI/CD.</li>
<li>Pipelines are made of jobs with steps.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-ci-for-python-package-unit-test"><p>Content from <a href="ci-for-python-package-unit-test.html">CI for Python Package</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/ci-for-python-package-unit-test.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I setup CI for a Python package in GitHub Actions?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about the Actions for GitHub Actions</li>
<li>Learn basic setup for Python package GitHub Actions</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="setup-python-project">Setup Python project<a class="anchor" aria-label="anchor" href="#setup-python-project"></a>
</h1>
<p>For this episode, we will be using some of the material from the <a href="https://intersect-training.org/packaging" class="external-link">INTERSECT packaging
carpentry</a></p>
</div>
<div class="section level1">
<h1 id="setup-ci">Setup CI<a class="anchor" aria-label="anchor" href="#setup-ci"></a>
</h1>
<p>Now we will switch from setting up a general CI pipeline to more
specifically setting up CI for our Python package needs.</p>
<p>But first… ::::::::::::::::::::::::::::::::::::: challenge</p>
<div class="section level2">
<h2 id="activity-what-do-we-need-in-ci-for-a-python-package-project">Activity: What do we need in CI for a Python package project?<a class="anchor" aria-label="anchor" href="#activity-what-do-we-need-in-ci-for-a-python-package-project"></a>
</h2>
<p>What are some of the things we want to automate checks for in CI for
a Python Package?</p>
<p>What tools accomplish these checks?</p>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Just some suggestions (not comprehensive): * Testing passes
([pytest][pytest] for unit testing or [nox][nox] for parallel Python
environment testing) * Code is of quality (i.e. [ruff][ruff] or
[flake8][flake8] for [linting][lint] or [mccabe][mccabe] for reducing
[cyclomatic complexity][cc]) * Code conforms to project formatting guide
(i.e. [black][black] for formatting) * Code testing coverage does not
drop significanly (i.e. [pytest-cov][pytest-cov] or
[Coverage.py][coverage]) * Static type checking (i.e. [mypy][mypy] ) *
Documentation builds (i.e. [sphinx][sphinx] ) * Security vulnerabilities
(i.e. [bandit][bandit])</p>
</div>
</div>
</div>
</div>
<p>::::::::::::::::::::::::::::::::::::::::::::::::</p>
<div id="ci-development" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ci-development" class="callout-inner">
<h3 class="callout-title">CI development</h3>
<div class="callout-content">
<p>When you are first starting out setting up CI, don’t feel you need to
add all the checks at the beginning of a project. First, pick the ones
that are “must haves” or easier to implement. Then, iteratively improve
your pipeline.</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="setup-python-environment-in-ci">Setup Python environment in CI<a class="anchor" aria-label="anchor" href="#setup-python-environment-in-ci"></a>
</h2>
<p>As of right now, your <code>.github/workflows/main.yml</code> YAML
file should look like</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">  </span><span class="fu">greeting</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Greeting!</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo hello world</span></span></code></pre>
</div>
<p>Overall, we will want to get our CI to run our unit tests via
[pytest][pytest]. But first, let’s figure out how to setup a Python
environment.</p>
<p>Let’s change the name from <code>example</code> to
<code>Code Checks</code> to better reflect what we will be doing.</p>
<p>We will add another job (named <code>test-python-3-10</code>) and add
the steps to setup a Python 3.10 environment to our YAML file:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">greeting</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Greeting!</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo hello world</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-3-10</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python 3.10 on Ubuntu</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.10"</span></span></code></pre>
</div>
<p>You might be asking: <em>“What is going on with the <code>uses</code>
command?”</em></p>
<p>Here, we are using what GitHub calls [“Actions”][actions]. These are
custom applications that, quoted from the documation link above,
<em>“…performs a complex but frequently repeated task.”</em></p>
<p>Second, you might ask: <em>“Okay… but what is it doing?”</em></p>
<p>We won’t go into too much detail but mainly,
<code>actions/checkout@v3</code> checks out your code. This one is used
all the time.</p>
<div id="github-acions-marketplace" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="github-acions-marketplace" class="callout-inner">
<h3 class="callout-title">GitHub Acions Marketplace</h3>
<div class="callout-content">
<p>GitHub has what they call a [“Marketplace” for
“Actions”][marketplace-actions] where you can search for reusable
tasks.</p>
</div>
</div>
</div>
<p>There is a Marketplace page for <code>actions/checkout</code>
([Marketplace page][actions-checkout-marketplace]]) and also a GitHub
repository for the source code ([GitHub][actions-checkout-github]).</p>
<p>The <code>@v3</code> in <code>actions/checkout@v3</code> signifies
which version of the <code>actions/checkout</code> to use.</p>
<p>So… ::::::::::::::::::::::::::::::::::::: challenge</p>
</div>
<div class="section level2">
<h2 id="activity-what-does-the-setup-python-action-do">Activity: What does the <code>setup-python</code> Action do?<a class="anchor" aria-label="anchor" href="#activity-what-does-the-setup-python-action-do"></a>
</h2>
<p>What do you think the <code>actions/setup-python</code> does?</p>
<p>Can you find the Marketplace page for
<code>actions/setup-python</code>?</p>
<p>Can you find the GitHub repository for
<code>actions/setup-python</code>?</p>
<p><em>Bonus:</em> Can you find a file in the GitHub repo that gives you
all the <code>with</code> options?</p>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ul>
<li>This action helps install a version of Python along with other
options</li>
<li>Marketplace: <a href="https://github.com/marketplace/actions/setup-python" class="external-link">https://github.com/marketplace/actions/setup-python</a>
</li>
<li>GitHub repository: [<a href="https://github.com/actions/setup-python" class="external-link uri">https://github.com/actions/setup-python</a>][actions-setup-python-github]</li>
<li>
<em>Bonus:</em> This will be in the <code>actions.yml</code>. Here
is the <code>@v4</code> version of <code>actions.yml</code>: <a href="https://github.com/actions/setup-python/blob/v4/action.yml" class="external-link">link</a>.</li>
</ul>
</div>
</div>
</div>
</div>
<p>::::::::::::::::::::::::::::::::::::::::::::::::</p>
</div>
<div class="section level2">
<h2 id="running-your-unit-tests-via-ci">Running your unit tests via CI<a class="anchor" aria-label="anchor" href="#running-your-unit-tests-via-ci"></a>
</h2>
<p>We now have our Python environment setup in CI. Let’s add running our
tests!</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">  </span><span class="fu">greeting</span><span class="kw">:</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Greeting!</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo hello world</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-3-10</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python 3.10 on Ubuntu</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.10"</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
<p>We see that we are installing our Python package with the test
dependencies and then running <code>pytest</code>, just like we would
locally.</p>
<p>Let’s push it and see our new CI for Python!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/main.yml</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds Python 3.10 test to CI"</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre>
</div>
<p>Checkout the results! We see that we now have two jobs running!:</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-actions.png" alt="Actions" class="figure mx-auto d-block"><div class="figcaption">Actions</div>
</figure><p>We can see the output / results from running <code>pytest</code>:
<img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-actions-test.png" alt="Actions test" class="figure"></p>
<p>Similarly, we see our open Pull Request has updated dynamically with
updates!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-pull-request.png" alt="Pull Request" class="figure mx-auto d-block"><div class="figcaption">Pull Request</div>
</figure><div id="activity-running-multiple-jobs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="activity-running-multiple-jobs" class="callout-inner">
<h3 class="callout-title">Activity: Running multiple jobs</h3>
<div class="callout-content">
<p>Did the jobs run in sequence or in parallel?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Parallel. We will discuss this more when we get to the CD
section.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>GitHub has a Marketplace of reusable Actions</li>
<li>CI can help automated running tests for code changes to your Python
package</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-ci-for-python-package-matrix"><p>Content from <a href="ci-for-python-package-matrix.html">Matrix</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/ci-for-python-package-matrix.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I run CI for multiple Python versions and /or different
platforms?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Don’t Repeat Yourself (DRY)</li>
<li>Use a single job for multiple jobs</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s assume our tests are running great.</p>
<p>Yet, the domain scientist reports they are getting errors when they
run the Python package.</p>
<p>After talking with them, you find that they are running Python 3.11,
not 3.10.</p>
<p>How do we include this version of Python in our testing?</p>
<div class="section level1">
<h1 id="multiple-version-python-testing---naive-approach">Multiple version Python testing - Naive Approach<a class="anchor" aria-label="anchor" href="#multiple-version-python-testing---naive-approach"></a>
</h1>
<p>One approach would be to add another job to run tests for Python 3.11
as well.</p>
<p>Up to this point, we currently have the following:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">  </span><span class="fu">greeting</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Greeting!</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo hello world</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-3-10</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python 3.10 on Ubuntu</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.10"</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
<p>Let’s add testing a different version of Python in our CI!</p>
<div id="action-add-python-3.11-test" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-add-python-3.11-test" class="callout-inner">
<h3 class="callout-title">Action: Add Python 3.11 test</h3>
<div class="callout-content">
<p>First, remove the <code>greeting</code> job.</p>
<p>Then, add a new job called <code>test-python-3-11</code>.</p>
<p>Have this new job: - Checkout the code - Setup a Python 3.11
environment - Install the package with our test dependencies - Run the
tests via <code>pytest</code></p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-3-10</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python 3.10 on Ubuntu</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.10"</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-3-11</span><span class="kw">:</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python 3.11 on Ubuntu</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.11"</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now, let’s add this so we can catch any Python 3.11 bugs going
forward!</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/main.yml</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds job to CI for Python 3.11"</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre>
</div>
<p>Check the output!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-matrix-naive-approach.png" alt="GitHub Actions multi-version" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions multi-version</div>
</figure><p>Now, we do technically have multiple-versions of Python
supported.</p>
<p>Yet, we just added 13 lines of identical code with only one character
change…</p>
<div class="section level2">
<h2 id="dry-your-ci">DRY your CI<a class="anchor" aria-label="anchor" href="#dry-your-ci"></a>
</h2>
<p>“DRY” is an ancronym for [“Don’t Repeat Yourself”][dry], meaning
don’t have repeated code in your software. This reduces repetition and
avoids redundancy.</p>
<p>We do this for our software. There is no reason we should not apply
this principle to CI!</p>
</div>
</div>
<div class="section level1">
<h1 id="matrix">Matrix<a class="anchor" aria-label="anchor" href="#matrix"></a>
</h1>
<div id="action-building-a-matrix-across-different-versions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="action-building-a-matrix-across-different-versions" class="callout-inner">
<h3 class="callout-title">Action: Building a matrix across different versions</h3>
<div class="callout-content">
<p>We could do better using <code>matrix</code>. The latter allows us to
test the code against a combination of versions in a single job. Let’s
update our <code>.github/workflow/main.yml</code> and use
<code>matrix</code>.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Code Checks</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">  </span><span class="fu">test-python-versions</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python {% raw %}${{ matrix.python-version }}{% endraw %} on Ubuntu</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="at">        </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"3.10"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.11"</span><span class="kw">]</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Python {% raw %}${{ matrix.python-version }}{% endraw %}</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">% raw %</span><span class="kw">}</span><span class="at">${{ matrix.python-version }}{% endraw %}</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
<p>YAML truncates trailing zeroes from a floating point number, which
means that <code>version: [3.9, 3.10, 3.11]</code> will automatically be
converted to <code>version: [3.9, 3.1, 3.11]</code> (notice
<code>3.1</code> instead of <code>3.10</code>). The conversion will lead
to unexpected failures as your CI will be running on a version not
specified by you. This behavior resulted in several failed jobs after
the release of Python 3.10 on GitHub Actions. The conversion (and the
build failure) can be avoided by converting the floating point number to
strings - <code>version: ['3.9', '3.10', '3.11']</code>.</p>
<p>More details on matrix: <a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix" class="external-link">https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions</a>.</p>
</div>
</div>
</div>
<p>We can push the changes to GitHub and see how it will look like.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/main.yml</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds multi-version Python testing to CI via matrix"</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre>
</div>
<p>That is a much better way to add new versions and we have a
DRY-compliant CI!</p>
<div class="section level2">
<h2 id="test-experimental-versions-in-ci">Test experimental versions in CI<a class="anchor" aria-label="anchor" href="#test-experimental-versions-in-ci"></a>
</h2>
<p>Sometimes in your matrix, you want to push the boundaries of your
testing.</p>
<p>An example would be to test up to the latest alpha / beta release of
a Python version.</p>
<p>You do not want a failure in such cutting-edge, unstable tests
stopping your CI.</p>
<p>At time of writing, the latest supported beta version of Python for
the <code>actions/python-versions</code> is 3.12.0-beta.4 based on their
<a href="https://github.com/actions/python-versions/releases" class="external-link">GitHub
Releases</a>.</p>
<p>Let’s add this to our python version testing.</p>
<div class="section level3">
<h3 id="allow-experimental-jobs-to-fail-in-ci">Allow experimental jobs to fail in CI<a class="anchor" aria-label="anchor" href="#allow-experimental-jobs-to-fail-in-ci"></a>
</h3>
<p>This gets a little complicated, but there are a few flags we need to
set.</p>
<p>GitHub Actions will cancel all in-progress and queued jobs in the
matrix if any job in the matrix fails.</p>
<p>To disable this, we need to disable <code>fail-fast</code> in the
matrix strategy.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="at">  </span><span class="fu">fail-fast</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre>
</div>
<p>That should do it, right? Nope…</p>
<p>We have to add <code>continue-on-error: true</code> to a single job
that we allow to fail. If enabled, jobs in the matrix continue to run if
there is an error. By default <code>continue-on-error: false</code> and
will also cancel the matrix jobs if the “experimental” job fails.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">continue-on-error</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
<p>More details: <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategyfail-fast" class="external-link">https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategyfail-fast</a></p>
<p>Finally, we need to add this experimental job to the matrix. Also, we
need to flag it as “allowed to fail” somehow.</p>
<p>For this, we use <code>include</code> to add a single extra job to
the matrix with “metadata”.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="at">  </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="at">    </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.12.0-beta.4"</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="at">        </span><span class="fu">allow_failure</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
<p>This will add the string <code>"3.12.0-beta.4"</code> to the
<code>python-version</code> list in matrix with the arbitrary variable
<code>allow_failure</code> set to <code>true</code> as “metadata”. We
also must add the <code>allow_failure</code> “metadata” to the other
members of the matrix (see below).</p>
<p>More detail: <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategymatrixinclude" class="external-link">https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategymatrixinclude</a></p>
<div id="putting-it-together-for-python-experimental-job" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="putting-it-together-for-python-experimental-job" class="callout-inner">
<h3 class="callout-title">Putting it together for Python experimental job…</h3>
<div class="callout-content">
<p>So if we <strong>only</strong> want to allow the job with version set
to <code>3.12.0-beta.4</code> to fail without failing the workflow run,
we need something like:</p>
<p>Then the following would work for a job:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="at">   </span><span class="fu">job</span><span class="kw">:</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="at">     </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="at">     </span><span class="fu">continue-on-error</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">% raw %</span><span class="kw">}</span><span class="at">${{ matrix.allow_failure }}{% endraw %}</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="at">     </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="at">       </span><span class="fu">fail-fast</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span><span class="at"> </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="at">       </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="at">         </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"3.10"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.11"</span><span class="kw">]</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="at">         </span><span class="fu">allow_failure</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="ch">false</span><span class="kw">]</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="at">         </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="at">           </span><span class="kw">-</span><span class="at"> </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.12.0-beta.4"</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="at">             </span><span class="fu">allow_failure</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>::::::::::::::::::::::::::::::::::::: challenge</p>
</div>
</div>
<div class="section level2">
<h2 id="action-add-experimental-job-that-is-allowed-to-fail-in-the-matrix">Action: Add experimental job that is allowed to fail in the
matrix<a class="anchor" aria-label="anchor" href="#action-add-experimental-job-that-is-allowed-to-fail-in-the-matrix"></a>
</h2>
<p>Add “3.12.0-beta.4” to our current Python package CI YAML via the
matrix but allow it to fail.</p>
<p>::::::::::::::::::::::::::::::::::::: solution</p>
<p>## Solution ```yaml name: Code Checks on: push jobs:</p>
<p>test-python-versions: name: Check Python {% raw %}<span class="math inline">\({{ matrix.python-version }}{% endraw %} on Ubuntu
     runs-on: ubuntu-latest
     continue-on-error: {% raw %}\)</span>{{ matrix.allow_failure }}{%
endraw %} strategy: fail-fast: false matrix: python-version: [“3.10”,
“3.11”] allow_failure: [false] include: - python-version:
“3.12.0-beta.4” allow_failure: true</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a> <span class="ex">steps:</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>   <span class="ex">-</span> uses: actions/checkout@v3</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>   <span class="ex">-</span> name: Setup Python {% raw %}<span class="va">${</span><span class="er">{ matrix.python-version </span><span class="va">}</span>}{% endraw %}</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>     <span class="ex">uses:</span> actions/setup-python@v4</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>     <span class="ex">with:</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>       <span class="ex">python-version:</span> {% raw %}<span class="va">${</span><span class="er">{ matrix.python-version </span><span class="va">}</span>}{% endraw %}</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>   <span class="ex">-</span> name: Install package</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>     <span class="ex">run:</span> python <span class="at">-m</span> pip install <span class="at">-e</span> .<span class="pp">[</span><span class="ss">test</span><span class="pp">]</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>   <span class="ex">-</span> name: Test package</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>     <span class="ex">run:</span> python <span class="at">-m</span> pytest</span></code></pre>
</div>
<pre><code>
:::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::

Let's commit this and see how it looks!

```bash
git add .github/workflows/main.yml
git commit -m "Adds experimental Python 3.12.0-beta.4 test to CI"
git push -u origin add-ci</code></pre>
<p>We see that the overall workflow passed even though the Python
3.12.0-beta.4 job failed!</p>
<p>Also, note that we see that GitHub Actions reports an exit code that
is non-zero! Like previously discussed, exit codes are what CI tools /
solution are built around.</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-matrix-allow-failure.png" alt="GitHub Actions allow failure" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions allow failure</div>
</figure><div id="experimental-ci-jobs" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="experimental-ci-jobs" class="callout-inner">
<h3 class="callout-title">Experimental CI jobs</h3>
<div class="callout-content">
<p>This allows us to run all kinds of “experimental” jobs. Examples are
trying new versions of software or checking deprecated versions.</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="cross-platform-testing">Cross-platform testing<a class="anchor" aria-label="anchor" href="#cross-platform-testing"></a>
</h2>
<p>Uh oh… the domain scientist is back with an issue.</p>
<p>After talking with him, you find out his summer intern cannot run the
python package on their Windows machine.</p>
<p>You have Linux Ubuntu and your domain scientist collaborator / team
member has Mac.</p>
<p>How do we test our Python package across Linux, Mac, and Windows
(i.e. cross-platform)?</p>
<div class="section level3">
<h3 id="selecting-the-github-hosted-runner-platform">Selecting the GitHub-hosted runner platform<a class="anchor" aria-label="anchor" href="#selecting-the-github-hosted-runner-platform"></a>
</h3>
<p>We honestly already have what we need, the
[<code>runs-on</code>][runs-on] command!</p>
<p>All we need to know is what values are allowed.</p>
<p>Inside of the <code>runs-on</code> documentation, there is a list of
labels we can use to select the platform of the runner: [list of labels
for runner types][runner-types]</p>
<div id="action-find-out-the-labels-for-all-three-platforms" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-find-out-the-labels-for-all-three-platforms" class="callout-inner">
<h3 class="callout-title">Action: Find out the labels for all three platforms</h3>
<div class="callout-content">
<p>Using the documentation links above, get the three “latest” labels
for Linux, Mac, and Windows.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ul>
<li>Linux: <code>ubuntu-latest</code>
</li>
<li>Mac: <code>macos-latest</code>
</li>
<li>Windows: <code>windows-latest</code>
</li>
</ul>
</div>
</div>
</div>
</div>
<p>Using these labels, we could create the following setup to run on all
three platforms!</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">ubuntu-latest</span><span class="kw">,</span><span class="at"> macos-latest</span><span class="kw">,</span><span class="at"> windows-latest</span><span class="kw">]</span></span></code></pre>
</div>
<div id="not-necessarily-the-best-practice-to-use-latest" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="not-necessarily-the-best-practice-to-use-latest" class="callout-inner">
<h3 class="callout-title">Not necessarily the best practice to use “latest”…</h3>
<div class="callout-content">
<p>It is arguable but… using “latest” versions for the platforms may not
be the best practice. This practice is essentially testing versions of
the platforms that will change, eventually, when the newest OS platform
version is created for “latest”.</p>
<p>This leaves you vulnerable to your CI breaking due to no change to
the code.</p>
<p>However, this is a very infrequent change and probably fine to stay
with “latest” so you don’t have to change when the other eventual change
will occur: a pinned version of the OS platform is deprecated and no
longer available!</p>
</div>
</div>
</div>
<p>::::::::::::::::::::::::::::::::::::: challenge</p>
</div>
</div>
<div class="section level2">
<h2 id="action-add-cross-platform-testing-to-ci-yaml">Action: Add cross-platform testing to CI YAML<a class="anchor" aria-label="anchor" href="#action-add-cross-platform-testing-to-ci-yaml"></a>
</h2>
<p>Using the “latest” labels, add Linux, Mac, and Windows testing to our
current CI YAML.</p>
<p>HINT: You will need a variable under <code>matrix</code> that you use
for <code>runs-on</code> and also for the <code>include</code></p>
<p>::::::::::::::::::::::::::::::::::::: solution</p>
<p>## Solution ```yaml name: Code Checks on: push jobs:</p>
<p>test-python-versions: name: Check Python {% raw %}<span class="math inline">\({{ matrix.python-version }}{% endraw %} on {% raw
%}\)</span>{{ matrix.runs-on }}{% endraw %} continue-on-error: {% raw
%}<span class="math inline">\({{ matrix.allow_failure }}{% endraw %}
     runs-on: {% raw %}\)</span>{{ matrix.runs-on }}{% endraw %}
strategy: fail-fast: false matrix: runs-on: [ubuntu-latest,
windows-latest, macos-latest] python-version: [“3.10”, “3.11”]
allow_failure: [false] include: - python-version: “3.12.0-beta.4”
runs-on: ubuntu-latest allow_failure: true</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a> <span class="ex">steps:</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>   <span class="ex">-</span> uses: actions/checkout@v3</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>   <span class="ex">-</span> name: Setup Python {% raw %}<span class="va">${</span><span class="er">{ matrix.python-version </span><span class="va">}</span>}{% endraw %}</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>     <span class="ex">uses:</span> actions/setup-python@v4</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>     <span class="ex">with:</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>       <span class="ex">python-version:</span> {% raw %}<span class="va">${</span><span class="er">{ matrix.python-version </span><span class="va">}</span>}{% endraw %}</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>   <span class="ex">-</span> name: Install package</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>     <span class="ex">run:</span> python <span class="at">-m</span> pip install <span class="at">-e</span> .<span class="pp">[</span><span class="ss">test</span><span class="pp">]</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>   <span class="ex">-</span> name: Test package</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>     <span class="ex">run:</span> python <span class="at">-m</span> pytest</span></code></pre>
</div>
<pre><code>
:::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::

Let's push these changes and see how it goes!

```bash
git add .github/workflows/main.yml
git commit -m "Adds cross-platform testing to CI"
git push</code></pre>
<p>We see that now we are also testing across all the platforms!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-matrix-cross-platform.png" alt="GitHub Actions cross platform" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions cross platform</div>
</figure>
</div>
<div class="section level2">
<h2 id="pull-request">Pull Request<a class="anchor" aria-label="anchor" href="#pull-request"></a>
</h2>
<p>That wraps up the CI portion for the Python package.</p>
<p>If you’d like, you can add more steps to the jobs to perform other
checks (i.e. linting, format checks, documentation builds, etc.)</p>
<p>Once you are happy, let’s use our open pull request for this branch
and get it merged back into <code>main</code>!</p>
<p>You’ll notice that the Pull Request shows us that a CI check didn’t
pass but the overall workflow passed and able to be merged in!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-ci-matrix-cross-platform-pull-request.png" alt="GitHub Actions pull request" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions pull request</div>
</figure>
</div>
<div class="section level2">
<h2 id="clean-up-local-repository">Clean up local repository<a class="anchor" aria-label="anchor" href="#clean-up-local-repository"></a>
</h2>
<p>To get your local repository up-to-date, you can run the
following:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">git</span> checkout main</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">git</span> pull</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">git</span> remote prune origin <span class="co"># prune any branches deleted in the remote / GitHub that are still local</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-D</span> add-ci <span class="co"># optional</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Matrix can help DRY your CI for multi-version and cross-platform
testing</li>
<li>Using <code>matrix</code> allows to test the code against a
combination of versions.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-cd-for-python-package"><p>Content from <a href="cd-for-python-package.html">CD for Python Package</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/cd-for-python-package.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I setup CD for a Python package in GitHub Actions?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about building package using GitHub Actions</li>
<li>Learn what is required to publish to PyPi</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We have CI setup to perform our automated checks.</p>
<p>We have continued to add new features and now, we want to get these
new features to our Users.</p>
<p>Just as we have automated code checks, we can automated deployment of
our package to a package registry upon a release trigger.</p>
<div class="section level1">
<h1 id="setup-cd-for-releases">Setup CD for Releases<a class="anchor" aria-label="anchor" href="#setup-cd-for-releases"></a>
</h1>
<p>We previously created our CI workflow YAML file.</p>
<p>We <em>could</em> keep using that one, possibly.</p>
<p>However, we previously were triggering on every single
<code>push</code> event (i.e. anytime we uploaded any commits to any
branch!)</p>
<div class="section level2">
<h2 id="trigger-for-cd">Trigger for CD<a class="anchor" aria-label="anchor" href="#trigger-for-cd"></a>
</h2>
<p>Do we want to publish our Python Package for any pushed code?
Definitely not!</p>
<p>We want to instead pick the trigger event and create a new GitHub
Actions YAML just for our CD workflow.</p>
<p>There are different triggers we can use: * any tags pushed to the
repository</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="at">    </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="at">      </span><span class="fu">tags</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="st">'*'</span></span></code></pre>
</div>
<ul>
<li>tags that match semantic version formatting (below is a <a href="https://regexlearn.com/learn/regex101" class="external-link">regular expression</a> used
to match a pattern of text)</li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">    </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">      </span><span class="fu">tags</span><span class="kw">:</span><span class="at"> </span><span class="st">'v[0-9]+.[0-9]+.[0-9]+-*'</span></span></code></pre>
</div>
<ul>
<li>manually triggered from UI and / or on GitHub Releases</li>
</ul>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at">    </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">      </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> published</span></span></code></pre>
</div>
<p>Let’s continue using the “releases” one.</p>
<p>The first, <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#workflow_dispatch" class="external-link"><code>workflow_dispatch</code></a>,
allows you to manually trigger the workflow from the GitHub web UI for
testing.</p>
<p>The second, <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release" class="external-link"><code>release</code></a>,
will trigger whenever you make a <a href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository#creating-a-release" class="external-link">GitHub
Release</a>.</p>
<p>Now that we have our triggers, we need to do something with them.</p>
<p>We want to push our Python Package to a package registry.</p>
<p>But first, we must build our distrbution to upload!</p>
</div>
<div class="section level2">
<h2 id="build-job-for-cd">Build job for CD<a class="anchor" aria-label="anchor" href="#build-job-for-cd"></a>
</h2>
<p>Let’s start on our new CD YAML for releases.</p>
<p>Write the following in
<code>.github/workflows/releases.yaml</code></p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Releases</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">    </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">      </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> published</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="at">  </span><span class="fu">dist</span><span class="kw">:</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build SDist &amp; wheel</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pipx run build</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> build-artifact</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist/*</span></span></code></pre>
</div>
<p>Here we have a job called “dist” that: * Checks out the repository
using the <code>actions/checkout</code> Action again. * Uses <a href="https://pypa.github.io/pipx/" class="external-link">pipx</a> to run the build of the
source (SDist) and build (wheels) distrubtions. This produces the wheel
and sdist in <code>./dist</code> directory. * Use a new Action, called
<code>actions/upload-artifact</code> (<a href="https://github.com/marketplace/actions/upload-a-build-artifact" class="external-link">Markplace
page</a>)</p>
<p>From the <code>actions/upload-artifact</code> <a href="https://github.com/marketplace/actions/upload-a-build-artifact" class="external-link">Markplace
page</a>, we can see this saves artifacts between jobs by uploading and
storing them in GitHub.</p>
<p>Specifically, we are uploading and storing the artifacts from the
<code>./dist</code> directory in the previous step and naming that
artiface “build-artifact”. We will see, this is how we can pass the
artifacts to another job or download ourselves from the GitHub UI.</p>
<p>This gives us our first step in the CD process, building the
artifacts for a software release!</p>
</div>
<div class="section level2">
<h2 id="test-using-build-artifacts-in-another-job">Test using build artifacts in another job<a class="anchor" aria-label="anchor" href="#test-using-build-artifacts-in-another-job"></a>
</h2>
<p>Now, we want to take the artifact in the <code>dist</code> job and
use it in our next phase.</p>
<p>To do so, we need to use the complimentary Action to
<code>actions/upload-artifact, which is</code>action/download-artifact`.</p>
<p>From the <a href="https://github.com/marketplace/actions/download-a-build-artifact" class="external-link">Marketplace
page</a>, we can see this simply downloads the artifact that is stored
using the <code>path</code>.</p>
<p>Let’s add a “test” <code>publish</code> job.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Releases</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">    </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">      </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> published</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">  </span><span class="fu">dist</span><span class="kw">:</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build SDist &amp; wheel</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pipx run build</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"build-artifact"</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist/*</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="at">  </span><span class="fu">publish</span><span class="kw">:</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/download-artifact</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"build-artifact"</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Publish release</span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Uploading!"</span></span></code></pre>
</div>
<p>Using the above test YAML, let’s upload this and perform a release to
run the CD pipeline.</p>
<p>First, checkout a new branch for CD from <code>main</code>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> add-cd</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/releases.yml</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds build + test publish to CD"</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin add-cd</span></code></pre>
</div>
<p>Go ahead and merge this in <code>main</code> as well.</p>
<p>Then, let’s go into the Actions tab and run the Release job from the
UI:</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-cd-run-workflow.png" alt="Release manual" class="figure mx-auto d-block"><div class="figcaption">Release manual</div>
</figure><div id="action-test-out-the-publish-yaml" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-test-out-the-publish-yaml" class="callout-inner">
<h3 class="callout-title">Action: Test out the publish YAML</h3>
<div class="callout-content">
<p>Does the CD run successfully?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Nope!</p>
<p>The <code>dist</code> job passes but the <code>publish</code> job
fails. The <code>publish</code> job cannot fine the artifact. <img src="%7B%7B%20page.root%20%7D%7D/fig/python-cd-fail.png" alt="Release failing" class="figure"></p>
</div>
</div>
</div>
</div>
<p>We previously asked about jobs running in sequence or parallel.</p>
<p>By default, jobs run in parallel.</p>
<p>Yet, here, we clearly need to operate in sequence since the build
must occur before the publish.</p>
<p>To define this dependency, we need the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idneeds" class="external-link"><code>needs</code></a>
command.</p>
<p>From the documentation, <code>needs</code> takes either a previous
job name or a list of previous job names that are required before this
one runs:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="at">  </span><span class="fu">job1</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="at">  </span><span class="fu">job2</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">    </span><span class="fu">needs</span><span class="kw">:</span><span class="at"> job1</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="at">  </span><span class="fu">job3</span><span class="kw">:</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="at">    </span><span class="fu">needs</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">job1</span><span class="kw">,</span><span class="at"> job2</span><span class="kw">]</span></span></code></pre>
</div>
<p>Let’s add a “test” <code>publish</code> job.</p>
<div id="action-test-out-the-publish-yaml---take-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-test-out-the-publish-yaml---take-2" class="callout-inner">
<h3 class="callout-title">Action: Test out the publish YAML - Take 2!</h3>
<div class="callout-content">
<p>Re-write the current YAML using <code>needs</code> to fix the
dependency issue. Mainly, we need to specify that the
<code>publish</code> job <code>needs</code> the <code>dist</code> job to
run first.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Releases</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">  </span><span class="fu">workflow-dispatch</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="at">  </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="at">    </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> published</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="at">  </span><span class="fu">dist</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build SDist &amp; wheel</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pipx run build</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"build-artifact"</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist/*</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="at">  </span><span class="fu">publish</span><span class="kw">:</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="at">    </span><span class="fu">needs</span><span class="kw">:</span><span class="at"> dist</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/download-artifact</span></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"build-artifact"</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist</span></span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Publish release</span></span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Uploading!"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Let’s add these changes and push!</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/releases.yml</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Fixes build + test publish to CD"</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre>
</div>
<p>Perform another manual run for the Releases workflow and check the
results!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/python-cd-pipeline-pass.png" alt="Pipeline passes" class="figure mx-auto d-block"><div class="figcaption">Pipeline passes</div>
</figure><p>We have a successfful pipeline with the proper dependencies and the
artifacts!</p>
<p>We are ready to swap out the test publishing step with a more
realistic example.</p>
</div>
<div class="section level2">
<h2 id="publish-to-test-pypi-package-repository">Publish to Test PyPi package repository<a class="anchor" aria-label="anchor" href="#publish-to-test-pypi-package-repository"></a>
</h2>
<p>Instead of creating a “production” version in <a href="https://pypi.org/" class="external-link">PyPi</a>, we can use <a href="https://test.pypi.org/" class="external-link">Test PyPi</a> instead.</p>
<div class="section level3">
<h3 id="get-api-token-from-testpypi---github-actions">Get API token from TestPyPi -&gt; GitHub Actions<a class="anchor" aria-label="anchor" href="#get-api-token-from-testpypi---github-actions"></a>
</h3>
<div id="notice-the-following-requires-createing-an-account-on-testpypi-putting-secrets-in-the-github-repository-and-uploading-a-python-package-to-testpypi." class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="notice-the-following-requires-createing-an-account-on-testpypi-putting-secrets-in-the-github-repository-and-uploading-a-python-package-to-testpypi." class="callout-inner">
<h3 class="callout-title">Notice: The following requires createing an account on TestPyPi, putting secrets in the GitHub repository, and
uploading a Python package to TestPyPi.</h3>
<div class="callout-content">
<p>If you do not feel comfortable with these tasks, feel free to just
read along</p>
</div>
</div>
</div>
<p>To setup using TestPyPi, we need to: * <a href="https://test.pypi.org/account/register/" class="external-link">Register</a> for an
account on TestPyPi</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/testpypi-register.png" alt="Register Page" class="figure mx-auto d-block"><div class="figcaption">Register Page</div>
</figure><ul>
<li>Get an <a href="https://pypi.org/help/#apitoken" class="external-link">API token</a> so we
can have GitHub authenticate to TestPyPi on our behalf. Go to the
TestPyPi and <a href="https://test.pypi.org/manage/account/#api-tokens" class="external-link">get an API
token</a>
</li>
</ul>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/testpypi-api-token.png" alt="Token Page" class="figure mx-auto d-block"><div class="figcaption">Token Page</div>
</figure><ul>
<li>Go to <code>Settings</code> -&gt; <code>Secrets</code> -&gt;
<code>Actions</code> in the GitHub UI</li>
</ul>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/github-secrets.png" alt="Secrets Page" class="figure mx-auto d-block"><div class="figcaption">Secrets Page</div>
</figure><ul>
<li>Add the TestPyPi API token to GitHub Secrets (call it
<code>TEST_PYPI_API_TOKEN</code>)</li>
</ul>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/github-secrets-api-token.png" alt="Secrets API Page" class="figure mx-auto d-block"><div class="figcaption">Secrets API Page</div>
</figure><p>Now that we have the credentials in GitHub for our PyPi package
repository, let us write out the YAML.</p>
</div>
<div class="section level3">
<h3 id="setup-cd-for-publishing-to-testpypi">Setup CD for publishing to TestPyPi<a class="anchor" aria-label="anchor" href="#setup-cd-for-publishing-to-testpypi"></a>
</h3>
<p>For GitHub Actions, we can use the Action <a href="https://github.com/marketplace/actions/pypi-publish" class="external-link"><code>actions/gh-action-pypi-publish</code></a>.</p>
<p>Mainly, we need the following to replace our test publish step:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> pypa/gh-action-pypi-publish@release/v1</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="at">    </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="at">      </span><span class="fu">password</span><span class="kw">:</span><span class="at"> ${{ secrets.TEST_PYPI_API_TOKEN }}</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="at">      </span><span class="fu">repository-url</span><span class="kw">:</span><span class="at"> https://test.pypi.org/legacy/</span></span></code></pre>
</div>
<p>The <code>secrets</code> is a way to gain access to and pull in
secrets stored in GitHub into CI/CD using GitHub Actions.</p>
<div id="disclaimer" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="disclaimer" class="callout-inner">
<h3 class="callout-title">DISCLAIMER</h3>
<div class="callout-content">
<p>Since we will be trying to upload a package, we might get a “clash”
with an existing name. If so, change the name of the project to
something unique in the pyproject.toml.</p>
</div>
</div>
</div>
<p>After uploading the following, commiting the changes, and doing a
“release”, you will see something like the following:</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/testpypi-github-actions-success.png" alt="Success actions" class="figure mx-auto d-block"><div class="figcaption">Success actions</div>
</figure><p>Also, you can go to your projects page and be able to see the new
package show up! - <a href="https://test.pypi.org/manage/projects/" class="external-link">https://test.pypi.org/manage/projects/</a></p>
</div>
</div>
</div>
<div class="section level1">
<h1 id="wrap-up">Wrap up<a class="anchor" aria-label="anchor" href="#wrap-up"></a>
</h1>
<p>Now, we have CD setup for a Python package to a PyPi registry!</p>
<p>Feel free to change out the triggers, switch to PyPi, or add multiple
PyPi repositories for deployment.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>GitHub Actions can also help you deploy your package to a registry
for distribution.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-add-badges"><p>Content from <a href="add-badges.html">Badge for CI/CD</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/add-badges.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to add something that communicates / visualizes the status of
CI/CD?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Add a badge to project for CI/CD status</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="badges">Badges<a class="anchor" aria-label="anchor" href="#badges"></a>
</h1>
<p>As you run CI, you do see the current status of CI/CD for feature
branches in pull requests.</p>
<p>You can also check the status via navigating to the Actions tab in
GitHub.</p>
<p>Yet, for the <code>main</code> branch or other “important” branches
for your team, wouldn’t you like to bring more visibility to the status
of CI?</p>
<p>Like a monitor to tell you if it is broken or not? (maybe yes, maybe
no…)</p>
<p>If you do, badges are a very easy way to communicate things about
your project to your team and others and can easily be put in your
markdown README files!</p>
</div>
<div class="section level1">
<h1 id="badges-1">Badges<a class="anchor" aria-label="anchor" href="#badges-1"></a>
</h1>
<p>Badges are not specific to CI/CD.</p>
<p>You can create ones for which Python versions you use, what license
you have, or what the current version is of your released software.</p>
<p><a href="https://shields.io/" class="external-link">Shields.io</a> is a great resource to
create all kinds of badges that you can then add to your README or other
markdown.</p>
<p>Yet, for CI/CD, GitHub Actions already provides this badge for you,
you just need to know what to add to your README.</p>
<p>The <a href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge" class="external-link">GitHub
Actions badges</a> has the following template to create badges in your
README markdown files! Just replace: * OWNER * REPOSITORY * YAML</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">![example</span> workflow]<span class="er">(</span><span class="ex">https://github.com/OWNER/REPOSITORY/actions/workflows/YAML/badge.svg</span><span class="kw">)</span></span></code></pre>
</div>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">![example</span> workflow]<span class="er">(</span><span class="ex">https://github.com/marshallmcdonnell/intersect-training-cicd/actions/workflows/main.yaml/badge.svg</span><span class="kw">)</span></span></code></pre>
</div>
<p>Which will give you something like: <img src="fig/github-actions-badge.png" alt="badge" class="figure"></p>
<p>If you like, feel free to add one to your repository.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Badges are fun!</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-discuss-documentation-ci-cd"><p>Content from <a href="discuss-documentation-ci-cd.html">(Bonus) Discuss CI/CD for Documentation</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/discuss-documentation-ci-cd.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the documetation artifact and what does CI/CD look like for
this?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Figure out the CI/CD for documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Next, we will discuss another artifact from software we can setup CI
/ CD for: container images!</p>
<div class="section level1">
<h1 id="documentation-artifacts">Documentation artifacts<a class="anchor" aria-label="anchor" href="#documentation-artifacts"></a>
</h1>
<p>In our example repository, we have our documentation source code in
<code>docs/</code>.</p>
<p>Using <a href="">sphinx</a>, you can “build” the documentation.
Similar to our Python package, the output of the documentation build is
an artifact. Yet, it is not an installable package that we output.</p>
<div id="action-what-are-the-artifacts-for-documentation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-what-are-the-artifacts-for-documentation" class="callout-inner">
<h3 class="callout-title">Action: What are the artifacts for documentation?</h3>
<div class="callout-content">
<p>When you access documentation for some of your favorite softwares,
what form is it in? Which is your favorite form of documentation?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Examples </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li>Websites, like on [ReadTheDocs][rtd] (example: <a href="https://numpy.readthedocs.io/en/latest/" class="external-link">NumPy docs</a>)</li>
<li>PDF files (example: <a href="http://rmcprofile.org/images_rmcprofile/6/6c/Rmcprofile_v6.7.4_manual.pdf" class="external-link">RMCProfile
v6.7.4 docs</a>)</li>
<li>API documentation like [Swagger / OpenAPI][openapi] for
Software-as-a-Service (example: <a href="https://api.arcsecond.io/schema/swagger/#/" class="external-link">Arcsecond Swagger</a>
or <a href="https://docs.github.com/en/rest?apiVersion=2022-11-28" class="external-link">GitHub REST
API docs</a>)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="what-do-we-want-from-cicd-for-sphinx-documentation">What do we want from CI/CD for Sphinx documentation?<a class="anchor" aria-label="anchor" href="#what-do-we-want-from-cicd-for-sphinx-documentation"></a>
</h2>
<p>Sphinx will allow for multiple output formats (i.e. PDF or
website).</p>
<p>Arguably, the website format is the favorite. For this, Sphinx can
generate HTML files that can be used to create a [static
webpage][static-page]</p>
<p>As we discussed in the first episode, we can use CI / CD for all
sorts of stuff. We just need to ask the questions: * <em>“What workflow
am I trying to automate?”</em> * For CI: <em>“What does ‘breaking
changes’ mean for my workflow?”</em> * For CD: <em>“What does deployment
/ delivery / release mean for my workflow?</em></p>
<div id="action-answer-these-questions-for-our-documentation-workflow" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-answer-these-questions-for-our-documentation-workflow" class="callout-inner">
<h3 class="callout-title">Action: Answer these questions for our documentation workflow</h3>
<div class="callout-content">
<p>Considering we use sphinx to create files and want a documentation
webpage, what are your answers to the questions above?</p>
<ul>
<li>For CI, what will we automate and check for documentation?</li>
<li>For CD, what will we be deploying for documentation?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ul>
<li>For CI: we want to automate building the documetation HTML
files</li>
<li>For CD: we want to automatically publish the artifact for the static
webpage and, eventually, deploy it onto a web server.</li>
</ul>
</div>
</div>
</div>
</div>
<p>For documentation CI/CD, we do need to think about the end goal.</p>
<p>Basically, if we aren’t using services like [ReadTheDocs][rtd], we
need to run a web site on a web server.</p>
<p>So the HTML files <em>could</em> be considered the final artifact.
Yet, there is a “nicer” solution for software artifacts that have gained
immense popularity do to their ease of deployment and
reproducibility!</p>
<p>To be revealed in the next episode…</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Documentation and website artifacts are different than package
artifacts</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-quick-primer-on-containers"><p>Content from <a href="quick-primer-on-containers.html">(Bonus) Quick primer on Containers</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/quick-primer-on-containers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a container and why would I want to publish one?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn high-level overview of containers</li>
<li>Learn what applications fit better for containerization</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="containers">Containers<a class="anchor" aria-label="anchor" href="#containers"></a>
</h1>
<p><a href="https://cloud.google.com/learn/what-are-containers" class="external-link">Containers</a>
are your packaged software application together with dependencies. This
sounds like a packaged library but these are different. Containers serve
more like executables and run very “isolated” from the system they are
run on. They bundle together such things like specific versions of
programming language runtimes and libraries required to run.</p>
<p>Some of the typical benefits advertised for containers is: * very
portable * lighweight (relative to things like virtual machines) *
application isolation on a system</p>
<p>They are very popular in any web-based software like websites,
databases or software services (i.e. REST APIs)</p>
<p>And they can be used for documentation websites!</p>
<div class="section level2">
<h2 id="difference-between-container-and-container-image">Difference between “Container” and “Container Image”<a class="anchor" aria-label="anchor" href="#difference-between-container-and-container-image"></a>
</h2>
<p>So you might say <em>“Okay, we are going to make a container as our
documentation software artifact, right?”</em></p>
<p>Not exactly… we are going to make a <em>container image</em>.</p>
<p>The difference is that a container image is <em>built</em>, usually
from another base container image like base OS images (i.e. Ubuntu and
Windows Server for operating systems and NGINX for web servers)</p>
<p>Then <em>containers</em> are created from <em>container images</em>,
with runtime modifications appied for each individual container. So two
containers could come from the same container image but would differ by
the environmental variables that are set for each or different data put
inside each container.</p>
<p>An analogy is there is one version of Windows 11 operating system. It
is installed on many Windows computers around the world.</p>
<p>Yet, each individual Windows computer far from identical since people
modify their personal computers: different backgrouns, different files
on them, different CPU resources for each computer.</p>
<p>So the artifact we want to produce is a <em>container image</em>.</p>
<p>Then, the User of the documentation container image can modify it at
runtime, such as web server configurations.</p>
</div>
</div>
<div class="section level1">
<h1 id="docker">Docker<a class="anchor" aria-label="anchor" href="#docker"></a>
</h1>
<p>One of arguably the most popular container image tools is <a href="https://docs.docker.com/get-docker/" class="external-link">Docker</a>.</p>
<p>Docker is widely used by developers to create software artifacts for
web-based applications. They are also super handy for development like
in testing with multiple software services (i.e. run with a database, a
software service, and a website locally on your machine).</p>
<p>We will go over very, very little about using Docker in this lesson.
There are <a href="https://hsf-training.github.io/hsf-training-docker/" class="external-link">other
Carpentries</a> which do go over using Docker for scientific computing
for the interested reader.</p>
<div id="what-we-will-need" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-we-will-need" class="callout-inner">
<h3 class="callout-title">What we will need</h3>
<div class="callout-content">
<p>The very high-level Docker understanding we need is: * A container
image is created in Docker using a <code>Dockerfile</code>: a file that
defines the container image build * The command
<code>docker build --file Dockerfile --tag &lt;name of image&gt; .</code>
(or shorthand, <code>docker build -t &lt;name of image&gt; .</code>)
will build the container image * The command
<code>docker run &lt;name of image&gt;</code> will spin up a container
from the container image and run it</p>
</div>
</div>
</div>
<p>We will simply be using Docker as a sort of “blackbox” tool to help
perform our CI/CD operations in GitHub Actions for documentation
artifact: * Build the documentation in a container image * Publish the
container image ready to run our documentation server * (<em>not covered
here</em>) Deploy this container on a server, cloud-service, or
container orchestration platform to serve our documentation to the
Users.</p>
</div>
<div class="section level1">
<h1 id="dockerhub">DockerHub<a class="anchor" aria-label="anchor" href="#dockerhub"></a>
</h1>
<p>We discussed containers vs. container images. And we stated that
container images are the artifact we want to produce. Yet, where to we
put this artifact?</p>
<p>We had <a href="https://pypi.org/" class="external-link">PyPi</a> for Python packages.</p>
<p>For Docker and container images, we mainly have <a href="https://hub.docker.com/" class="external-link">DockerHub</a></p>
<p>DockerHub is called a container image registry. We can “push” our
container images to DockerHub for others to be able to “pull” them down
to re-use them.</p>
<p>DockerHub is not the only container image registry software. It is
probably the most popular. But for now, you can consider it equivalent
to PyPi but for containers instead of Python packages.</p>
<div id="what-we-will-need-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-we-will-need-1" class="callout-inner">
<h3 class="callout-title">What we will need</h3>
<div class="callout-content">
<p>The very high-level Docker understanding we need is: * After building
an image, we can put it in a container image registry via
<code>docker push &lt;name of image&gt;</code> * We can retrieve an
image from a container image registry via
<code>docker pull &lt;name of image&gt;</code> * We can rename a
contianer image via
<code>docker tag &lt;original tag&gt; &lt;new tag&gt;</code></p>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="overall-docker-architecture">Overall Docker Architecture<a class="anchor" aria-label="anchor" href="#overall-docker-architecture"></a>
</h1>
<p>This graphic helps illustrate what we are doing with our
<code>docker build</code>, <code>docker run</code>,
<code>docker pull</code> and <code>docker push</code> commands we will
be using:</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/docker-architecture.png" alt="Docker arch" class="figure mx-auto d-block"><div class="figcaption">Docker arch</div>
</figure><p><a href="https://jerrelysan.blogspot.com/2021/06/enter-in-docker-container-what-is.html" class="external-link">image
source</a></p>
<div class="section level2">
<h2 id="wrap-up">Wrap up<a class="anchor" aria-label="anchor" href="#wrap-up"></a>
</h2>
<p>Now we have an idea of what we what to do for documentation CI/CD and
a tool to use for performing these operations (Docker).</p>
<p>Next, we will take these together and attempt to publish a container
image as a documentation artifact.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Containers are a very common packaging artifact for web-based
applications</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-ci-cd-for-documentation-using-containers"><p>Content from <a href="ci-cd-for-documentation-using-containers.html">(Bonus) Implementing CI/CD for documentation using containers</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/episodes/ci-cd-for-documentation-using-containers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to setup CI/CD for documentation using containers?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Setup a CI and CD workflow for container images using GitHub
Actions</li>
<li>Learn about the GitHub Container Image Registry</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Knowing about containers and how we want to create a container image,
we will dive into implementing CI/CD for our documentation using
Docker.</p>
<p>We won’t be running these commands locally so you do not need Docker
installed. We will just created the GitHub Actions YAML file to let
CI/CD run it instead.</p>
<p>If you do have docker installed, feel free to run these commands
locally. It is just not required.</p>
<div class="section level1">
<h1 id="setup-ci-for-documentation">Setup CI for documentation<a class="anchor" aria-label="anchor" href="#setup-ci-for-documentation"></a>
</h1>
<p>The main job we need for CI is to build the container image for the
documentation.</p>
<p>We can accomplish this simply with Docker via:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-docs .</span></code></pre>
</div>
<p>So let us add this to our CI YAML. Luckily, Docker is already
installed on the GitHub Actions runners!</p>
<p>If not already in the project directory, go ahead and get there. We
will make our feature branch:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">cd</span> intersect-training-cicd</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">git</span> checkout main</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">git</span> pull</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> add-docs-cicd</span></code></pre>
</div>
<p>We will create a new <code>.github/workflows/docs-ci.yml</code> file
in the project.</p>
<p>Open <code>.github/workflows/docs-ci.yml</code> with your favorite
editor and add the following</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Documentation CI</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">  </span><span class="fu">build-docs-using-docker</span><span class="kw">:</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build docs via Docker</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t my-docs .</span></span></code></pre>
</div>
<p>NOTE: Don’t forget the <code>.</code> at the end of the
<code>docker build -t my-docs .</code> command! That tells the build
command which directory to use.</p>
<p>Let’s push this to the repository and see what happens!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/docs-ci.yml</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds job to build docs in CI via docker"</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin add-docs-cicd</span></code></pre>
</div>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/docker-ci-docs.png" alt="GitHub Actions docs CI" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions docs CI</div>
</figure><p>So we are successfully building our container image in CI!</p>
<p>Now, we need to publish this image via CD. This is equivalent to
pushing the container image to a container image registry.</p>
</div>
<div class="section level1">
<h1 id="github-container-image-registry">GitHub Container Image Registry<a class="anchor" aria-label="anchor" href="#github-container-image-registry"></a>
</h1>
<p>We won’t be using the <a href="https://hub.docker.com/" class="external-link">DockerHub</a>
container image registry.</p>
<p>Instead, we will use GitHub’s built-in <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry" class="external-link">GitHub
Container Image Regsitry</a> (GHCR). Similar to one reason why we choose
GitHub Actions for CI/CD, GitHub can integration with GHCR without
requiring 3rd party credentials to be shared, like we did with
TestPyPi.</p>
<p>Also, it is free! DockerHub is as well, mostly.</p>
</div>
<div class="section level1">
<h1 id="setup-cd-for-documentation">Setup CD for documentation<a class="anchor" aria-label="anchor" href="#setup-cd-for-documentation"></a>
</h1>
<p>As before, we need the trigger setup for the publish / releases.</p>
<p>We can re-use what we previously had for the Python package CD
trigger:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">    </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">      </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> published</span></span></code></pre>
</div>
<p>For the jobs, we will do a build and push of the container image on
Releases.</p>
<p>We will heavily rely on existing Actions in GitHub to accomplish
this: * <code>docker/setup-buildx-action</code>: Sets up Docker for us
on the runner <a href="https://github.com/marketplace/actions/docker-setup-buildx" class="external-link">Marketplace</a>
* <code>docker/login-action</code>: Logs into container registries using
runner credentials <a href="https://github.com/marketplace/actions/docker-setup-buildx" class="external-link">Marketplace</a>
* <code>docker/build-push-action</code>: Builds and pushes image to
container registry. <a href="https://github.com/marketplace/actions/docker-build-push-action" class="external-link">Marketplace</a></p>
<p>Open <code>.github/workflows/docs-cd.yml</code> with your favorite
editor and add the following:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Documentation CD</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="at">    </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="at">      </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> published</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="at">  </span><span class="fu">publish-docs-using-docker</span><span class="kw">:</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="at">    </span><span class="fu">permissions</span><span class="kw">:</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="at">      </span><span class="fu">packages</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Docker Buildx</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/setup-buildx-action@v2</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Login to GitHub Container Registry</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/login-action@v2</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="at">          </span><span class="fu">registry</span><span class="kw">:</span><span class="at"> ghcr.io</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="at">          </span><span class="fu">username</span><span class="kw">:</span><span class="at"> ${{ github.actor }}</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="at">          </span><span class="fu">password</span><span class="kw">:</span><span class="at"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and push catalog image</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/build-push-action@v4</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="at">          </span><span class="fu">context</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="at">          </span><span class="fu">push</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="at"> </span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="at">          </span><span class="fu">platforms</span><span class="kw">:</span><span class="at"> linux/amd64,linux/arm64</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="at">          </span><span class="fu">tags</span><span class="kw">:</span><span class="at"> ghcr.io/${{ github.repository }}:${{ github.ref_name }}</span></span></code></pre>
</div>
<p>A few things to note: * The <code>permissions:packages:write</code>
is important to allow this job to write to [GitHub
Packages][github-packages], which the container registry is part of. *
In <code>docker/login-action</code>, <code>github.actor</code> is a
special variable GitHub provides for the runner to use as a “username”.
Similar to <code>__token__</code> usernames. * In
<code>docker/login-action</code>, <code>secrets.GITHUB_TOKEN</code> is a
secret GitHub provides for the runner to log back into other GitHub
services. Reference: <a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication" class="external-link">https://docs.github.com/en/actions/security-guides/automatic-token-authentication</a>
* In <code>docker/build-push-action</code>, the <code>push: true</code>
is what tells this action we want to push the image to the container
image registry * In <code>docker/build-push-action</code>, we are
building for multiple hardware platforms via
<code>platforms: linux/amd64,linux/arm64</code>. * In
<code>docker/build-push-action</code>, the <code>tags</code> is
essentially the tag name others will use to “pull” the image from. * We
are using some other <code>github.*</code> variables in the
<code>tags</code> to construct the image name in the container registry:
- <code>github.repository</code>: Repository name
(i.e. <code>marshallmcdonnell/intersect-training-cicd</code>) -
<code>github.ref_name</code>: Short name of branch or tag, using it as a
sort of “version number” (i.e. <code>add-docs-cd</code> or
<code>v0.1.0</code>)</p>
<p>Let’s push this to the repository and see what happens!</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/docs-cd.yml</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Adds CD for docs to container image registry"</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin add-docs-cicd</span></code></pre>
</div>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/github-container-package-cd.png" alt="GitHub Actions docs CD" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions docs CD</div>
</figure><p>Looks like it passed!</p>
<p>And if we look at the “Packages” tab in GitHub, we should see our
package!</p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/github-container-package.png" alt="GitHub Actions docs package" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions docs package</div>
</figure><p>Going into the package, we can see our Users are given instructions
on how to get this container via <code>docker pull</code></p>
<figure><img src="%7B%7B%20page.root%20%7D%7D/fig/github-container-package-page.png" alt="GitHub Actions docs package" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions docs package</div>
</figure><p>We can launch this container, mapping from the container port 80
(HTTP) to one on our host machine (8080), to spin up our docs
server!</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-p</span> 8080:80 <span class="op">&lt;</span>container image tag<span class="op">&gt;</span></span></code></pre>
</div>
<p>Then, navigate to <code>http://localhost:8080</code>.</p>
<p>Now we can allow operations or system administrators to serve our
docs using containers!</p>
</div>
<div class="section level1">
<h1 id="side-note-about-our-cd">Side note about our “CD”<a class="anchor" aria-label="anchor" href="#side-note-about-our-cd"></a>
</h1>
<div id="action-question-about-our-cd" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="action-question-about-our-cd" class="callout-inner">
<h3 class="callout-title">Action: Question about our CD</h3>
<div class="callout-content">
<p>So we just setup CD for a documentation server right?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Not quite. We are doing CD for the “publshing” part.</p>
<p>Yet, CD is continuous <em>delivery</em> or <em>deployment</em>. We
really have not deployed our server. Someone else still has to do this
for us right now.</p>
<p>True CD for a pipeline like this would include deploying this onto
the server as a website</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="wrap-up">Wrap up<a class="anchor" aria-label="anchor" href="#wrap-up"></a>
</h1>
<p>This wraps up CI/CD for containers.</p>
<p>Once you are happy, let’s use our open pull request for this branch
and get it merged back into <code>main</code>!</p>
<div class="section level2">
<h2 id="clean-up-local-repository">Clean up local repository<a class="anchor" aria-label="anchor" href="#clean-up-local-repository"></a>
</h2>
<p>To get your local repository up-to-date, you can run the
following:</p>
<pre><code>git checkout main
git pull
git remote prune origin # prune any branches deleted in the remote / GitHub that are still local
git branch -D add-docs-cicd # optional</code></pre>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>GitHub provides resources to publish container images</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/INTERSECT-training/CI-CD/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/INTERSECT-training/CI-CD/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/INTERSECT-training/CI-CD/" class="external-link">Source</a></p>
				<p><a href="https://github.com/INTERSECT-training/CI-CD/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:icosden@princeton.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/intersect-training/varnish/tree/406bb97bab56e8a0c29f2f362164c5d4a05b7ee1" class="external-link">varnish (1.0.7.9000)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://INTERSECT-training.github.io/CI-CD/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://INTERSECT-training.github.io/CI-CD/aio.html",
  "identifier": "https://INTERSECT-training.github.io/CI-CD/aio.html",
  "dateCreated": "2025-06-18",
  "dateModified": "2025-07-01",
  "datePublished": "2025-07-01"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

